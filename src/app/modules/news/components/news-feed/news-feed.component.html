<div class="container max-w-xl mx-auto mt-5">
  <div class="border rounded shadow p-4 bg-white">
    <div *ngIf="loading" class="absolute inset-0 flex items-center justify-center bg-white bg-opacity-75 z-50">
      <div class="text-center">
        <div class="inline-block w-8 h-8 border-4 border-pink-500 border-dashed rounded-full animate-spin"></div>
        <p class="text-sm text-gray-500 mt-2">Loading...</p>
      </div>
    </div>

    <h3 class="text-center text-lg font-semibold text-pink-600 mb-4">ğŸ“ New Post</h3>


    <!-- Title -->
    <div class="mb-3">
      <input
        [(ngModel)]="newPost.title"
        name="title"
        class="form-control form-control-sm"
        placeholder="Title (min 5 characters)"
      />
    </div>

    <!-- Description -->
    <div class="mb-3">
      <textarea
        [(ngModel)]="newPost.description"
        name="description"
        rows="2"
        class="form-control form-control-sm"
        placeholder="Write something interesting (min 10 characters)"
      ></textarea>
    </div>

    <!-- Image upload -->
    <div class="mb-3">
      <label class="form-label text-sm font-medium">ğŸ“¤ Upload Image</label>
      <input
        type="file" multiple
        (change)="onFilesSelected($event)"
        accept="image/*"
        class="form-control form-control-sm"
      />
    </div>

    <!-- Preview -->
    <div class="mt-3 flex flex-wrap gap-3">
      <div *ngFor="let img of previewUrls; let i = index" class="relative w-24 h-24">
        <img [src]="img" class="w-full h-full object-cover rounded shadow border" />
        <button
          (click)="removeImage(i)"
          type="button"
          class="absolute top-0 right-0 bg-red-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs"
          title="Remove image"
        >
          âœ•
        </button>
      </div>
    </div>

    <!-- Button -->
    <div class="text-end">
      <button class="btn btn-sm btn-pink bg-pink-600 text-white" (click)="createPost()">
        â• Post
      </button>
    </div>
  </div>
</div>
